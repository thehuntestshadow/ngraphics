<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - HEFAISTOS</title>
    <script>if(localStorage.getItem('ngraphics_theme')==='light')document.documentElement.setAttribute('data-theme','light')</script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="settings.css">
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="config.js"></script>
    <script src="supabase.js"></script>
    <script src="auth-ui.js"></script>
</head>
<body>
    <!-- Noise overlay -->
    <div class="noise-overlay"></div>

    <!-- Gradient orbs for atmosphere -->
    <div class="ambient-orb orb-1"></div>
    <div class="ambient-orb orb-2"></div>

    <!-- Header -->
    <header class="site-header">
        <div class="header-content">
            <div class="logo-group">
                <a href="index.html" class="logo-link">
                    <span class="logo-title">HEFAISTOS</span>
                </a>
            </div>
            <div class="page-title-center">
                <span class="page-title-text">Settings</span>
            </div>
            <div class="header-controls">
                <a href="dashboard.html" class="dashboard-link" title="Dashboard">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    <span>Dashboard</span>
                </a>
                <div id="accountContainer"></div>
                <button class="theme-toggle" id="themeToggle" title="Toggle light/dark mode" aria-label="Toggle light/dark mode">
                    <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                    <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="23"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                        <line x1="1" y1="12" x2="3" y2="12"/>
                        <line x1="21" y1="12" x2="23" y2="12"/>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="settings-page">
        <div class="settings-layout">
            <!-- Sidebar Navigation -->
            <nav class="settings-sidebar">
                <a href="#profile" class="settings-nav-item active" data-section="profile">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                    <span>Profile</span>
                </a>
                <a href="#billing" class="settings-nav-item" data-section="billing">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                        <line x1="1" y1="10" x2="23" y2="10"/>
                    </svg>
                    <span>Usage & Billing</span>
                </a>
                <a href="#api-keys" class="settings-nav-item" data-section="api-keys">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
                    </svg>
                    <span>API Keys</span>
                </a>
                <a href="#appearance" class="settings-nav-item" data-section="appearance">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="23"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                        <line x1="1" y1="12" x2="3" y2="12"/>
                        <line x1="21" y1="12" x2="23" y2="12"/>
                    </svg>
                    <span>Appearance</span>
                </a>
                <a href="#language" class="settings-nav-item" data-section="language">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="2" y1="12" x2="22" y2="12"/>
                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                    </svg>
                    <span>Language</span>
                </a>
                <a href="#analytics" class="settings-nav-item" data-section="analytics">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="20" x2="18" y2="10"/>
                        <line x1="12" y1="20" x2="12" y2="4"/>
                        <line x1="6" y1="20" x2="6" y2="14"/>
                    </svg>
                    <span>Analytics</span>
                </a>
                <a href="#danger" class="settings-nav-item settings-nav-danger" data-section="danger">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                        <line x1="12" y1="9" x2="12" y2="13"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    <span>Danger Zone</span>
                </a>
            </nav>

            <!-- Content Area -->
            <div class="settings-content">
                <!-- Profile Section -->
                <section id="profile" class="settings-section active">
                    <div class="settings-section-header">
                        <h2>Profile</h2>
                        <p>Manage your account information</p>
                    </div>
                    <div class="settings-section-body">
                        <div class="settings-form-group">
                            <label for="displayName">Display Name</label>
                            <input type="text" id="displayName" placeholder="Your name">
                        </div>
                        <div class="settings-form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" disabled class="settings-input-disabled">
                            <span class="settings-hint">Email cannot be changed</span>
                        </div>
                        <div class="settings-actions">
                            <button class="btn-primary" id="saveProfileBtn">Save Profile</button>
                        </div>
                    </div>
                </section>

                <!-- Usage & Billing Section -->
                <section id="billing" class="settings-section">
                    <div class="settings-section-header">
                        <h2>Usage & Billing</h2>
                        <p>Monitor your usage and manage subscription</p>
                    </div>
                    <div class="settings-section-body">
                        <div id="usageContainer" class="settings-usage-container">
                            <div class="usage-loading">Loading usage data...</div>
                        </div>
                    </div>
                </section>

                <!-- API Keys Section -->
                <section id="api-keys" class="settings-section">
                    <div class="settings-section-header">
                        <h2>API Keys</h2>
                        <p>Configure external service integrations</p>
                    </div>
                    <div class="settings-section-body">
                        <div class="settings-form-group">
                            <label for="lumaApiKey">Luma AI API Key</label>
                            <div class="settings-input-with-actions">
                                <input type="password" id="lumaApiKey" placeholder="luma-..." autocomplete="off">
                                <button class="btn-icon" id="toggleLumaKey" title="Show/hide" aria-label="Show or hide API key">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                        <circle cx="12" cy="12" r="3"/>
                                    </svg>
                                </button>
                                <button class="btn-icon" id="testLumaKey" title="Test key" aria-label="Test API key">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="20 6 9 17 4 12"/>
                                    </svg>
                                </button>
                            </div>
                            <span class="settings-hint">Required for Model Video studio. <a href="https://lumalabs.ai/dream-machine/api" target="_blank" rel="noopener">Get API key</a></span>
                        </div>
                        <div class="settings-actions">
                            <button class="btn-primary" id="saveApiKeysBtn">Save API Key</button>
                        </div>
                    </div>
                </section>

                <!-- Appearance Section -->
                <section id="appearance" class="settings-section">
                    <div class="settings-section-header">
                        <h2>Appearance</h2>
                        <p>Customize the look and feel</p>
                    </div>
                    <div class="settings-section-body">
                        <div class="settings-form-group">
                            <label>Theme</label>
                            <div class="settings-theme-toggle" id="settingsThemeToggle">
                                <button class="theme-btn" data-theme="dark">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                                    </svg>
                                    <span>Dark</span>
                                </button>
                                <button class="theme-btn" data-theme="light">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="5"/>
                                        <line x1="12" y1="1" x2="12" y2="3"/>
                                        <line x1="12" y1="21" x2="12" y2="23"/>
                                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                                        <line x1="1" y1="12" x2="3" y2="12"/>
                                        <line x1="21" y1="12" x2="23" y2="12"/>
                                    </svg>
                                    <span>Light</span>
                                </button>
                                <button class="theme-btn" data-theme="system">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                                        <line x1="8" y1="21" x2="16" y2="21"/>
                                        <line x1="12" y1="17" x2="12" y2="21"/>
                                    </svg>
                                    <span>System</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Language Section -->
                <section id="language" class="settings-section">
                    <div class="settings-section-header">
                        <h2>Language</h2>
                        <p>Set your preferred languages</p>
                    </div>
                    <div class="settings-section-body">
                        <div class="settings-form-group">
                            <label for="interfaceLanguage">Interface Language</label>
                            <select id="interfaceLanguage" class="settings-select">
                                <!-- Populated by JS -->
                            </select>
                            <span class="settings-hint">Controls buttons, labels, and menus</span>
                        </div>
                        <div class="settings-form-group">
                            <label for="generationLanguage">Generation Language</label>
                            <select id="generationLanguage" class="settings-select">
                                <!-- Populated by JS -->
                            </select>
                            <span class="settings-hint">Text in generated images and AI content</span>
                        </div>
                    </div>
                </section>

                <!-- Analytics Section -->
                <section id="analytics" class="settings-section">
                    <div class="settings-section-header">
                        <h2>Analytics & Usage</h2>
                        <p>Overview of your generation activity and storage</p>
                    </div>
                    <div class="settings-section-body settings-analytics-body">
                        <!-- Overview Cards -->
                        <div class="dashboard-cards" id="dashboardCards">
                            <div class="dashboard-card">
                                <div class="card-icon">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="3" width="18" height="18" rx="2"/>
                                        <circle cx="8.5" cy="8.5" r="1.5"/>
                                        <path d="M21 15l-5-5L5 21"/>
                                    </svg>
                                </div>
                                <div class="card-value" id="totalGenerations">0</div>
                                <div class="card-label">Total Generations</div>
                            </div>
                            <div class="dashboard-card">
                                <div class="card-icon success">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                    </svg>
                                </div>
                                <div class="card-value" id="totalFavorites">0</div>
                                <div class="card-label">Saved Favorites</div>
                            </div>
                            <div class="dashboard-card">
                                <div class="card-icon warning">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/>
                                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                                        <line x1="12" y1="22.08" x2="12" y2="12"/>
                                    </svg>
                                </div>
                                <div class="card-value" id="storageUsed">0 B</div>
                                <div class="card-label">Storage Used</div>
                            </div>
                            <div class="dashboard-card">
                                <div class="card-icon">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                                    </svg>
                                </div>
                                <div class="card-value">
                                    <span class="card-status" id="apiStatus">
                                        <span class="card-status-dot"></span>
                                        <span id="apiStatusText">Checking...</span>
                                    </span>
                                </div>
                                <div class="card-label">API Connection</div>
                            </div>
                        </div>

                        <!-- Tabs -->
                        <div class="dashboard-tabs" id="dashboardTabs">
                            <button class="tab-btn active" data-tab="overview">Overview</button>
                            <button class="tab-btn" data-tab="infographics">Infographics</button>
                            <button class="tab-btn" data-tab="models">Model Studio</button>
                            <button class="tab-btn" data-tab="bundles">Bundle Studio</button>
                        </div>

                        <!-- Cost Tracker -->
                        <div class="cost-tracker-section">
                            <div class="cost-tracker-header">
                                <h3 class="cost-tracker-title">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M12 6v6l4 2"/>
                                    </svg>
                                    Cost Tracker
                                </h3>
                                <button class="btn-secondary btn-sm" id="resetCostBtn" data-tooltip="Reset all cost tracking data to zero">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                                        <path d="M3 3v5h5"/>
                                    </svg>
                                    Reset
                                </button>
                            </div>
                            <div class="cost-tracker-grid">
                                <div class="cost-card today">
                                    <div class="cost-card-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                            <line x1="16" y1="2" x2="16" y2="6"/>
                                            <line x1="8" y1="2" x2="8" y2="6"/>
                                            <line x1="3" y1="10" x2="21" y2="10"/>
                                        </svg>
                                    </div>
                                    <div class="cost-card-content">
                                        <span class="cost-card-value" id="todayCost">$0.00</span>
                                        <span class="cost-card-label">Today</span>
                                    </div>
                                    <span class="cost-card-count" id="todayGenerations">0 gen</span>
                                </div>
                                <div class="cost-card alltime">
                                    <div class="cost-card-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <line x1="12" y1="1" x2="12" y2="23"/>
                                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                        </svg>
                                    </div>
                                    <div class="cost-card-content">
                                        <span class="cost-card-value" id="alltimeCost">$0.00</span>
                                        <span class="cost-card-label">All Time</span>
                                    </div>
                                    <span class="cost-card-count" id="alltimeGenerations">0 gen</span>
                                </div>
                                <div class="cost-breakdown">
                                    <h4 class="cost-breakdown-title">Cost by Studio</h4>
                                    <div class="cost-breakdown-list" id="costBreakdownList">
                                        <div class="cost-breakdown-empty">No cost data yet</div>
                                    </div>
                                </div>
                                <div class="cost-chart-card">
                                    <h4 class="cost-chart-title">7-Day Trend</h4>
                                    <div class="cost-chart-container">
                                        <canvas id="costTrendChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Charts Grid -->
                        <div class="charts-grid">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h3 class="chart-title">Generation Trends</h3>
                                    <span class="chart-subtitle">Last 7 days</span>
                                </div>
                                <div class="chart-container">
                                    <canvas id="trendsChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h3 class="chart-title">Model Usage</h3>
                                    <span class="chart-subtitle">By AI model</span>
                                </div>
                                <div class="chart-container">
                                    <canvas id="modelChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-card">
                                <div class="chart-header">
                                    <h3 class="chart-title">Studio Breakdown</h3>
                                    <span class="chart-subtitle">Generations per studio</span>
                                </div>
                                <div class="chart-container">
                                    <canvas id="studioChart"></canvas>
                                </div>
                            </div>
                            <div class="quick-access-card">
                                <div class="chart-header">
                                    <h3 class="chart-title">Recent Work</h3>
                                    <span class="chart-subtitle">Quick access</span>
                                </div>
                                <div class="quick-access-grid" id="quickAccessGrid">
                                    <div class="quick-access-empty">No recent generations</div>
                                </div>
                            </div>
                        </div>

                        <!-- Storage Panel -->
                        <div class="storage-panel">
                            <div class="storage-header">
                                <h3 class="storage-title">Storage Management</h3>
                                <div class="storage-actions">
                                    <button class="btn-secondary btn-sm" id="exportAllBtn" data-tooltip="Download all history items as a ZIP archive">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                            <polyline points="7 10 12 15 17 10"/>
                                            <line x1="12" y1="15" x2="12" y2="3"/>
                                        </svg>
                                        Export All
                                    </button>
                                    <button class="btn-secondary btn-sm" id="clearOldBtn" data-tooltip="Delete items older than 30 days from all studios">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="3 6 5 6 21 6"/>
                                            <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                                        </svg>
                                        Clear Old Items
                                    </button>
                                </div>
                            </div>
                            <div class="storage-breakdown" id="storageBreakdown">
                                <div class="storage-item">
                                    <div class="storage-item-header">
                                        <span class="storage-item-label">Infographics</span>
                                        <span class="storage-item-value" id="storageInfographics">0 items</span>
                                    </div>
                                    <div class="storage-bar">
                                        <div class="storage-fill infographics" id="storageFillInfographics" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="storage-item">
                                    <div class="storage-item-header">
                                        <span class="storage-item-label">Model Studio</span>
                                        <span class="storage-item-value" id="storageModels">0 items</span>
                                    </div>
                                    <div class="storage-bar">
                                        <div class="storage-fill models" id="storageFillModels" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="storage-item">
                                    <div class="storage-item-header">
                                        <span class="storage-item-label">Bundle Studio</span>
                                        <span class="storage-item-value" id="storageBundles">0 items</span>
                                    </div>
                                    <div class="storage-bar">
                                        <div class="storage-fill bundles" id="storageFillBundles" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Trash Section -->
                        <div class="trash-section" id="trashSection">
                            <div class="trash-header">
                                <div class="trash-title-group">
                                    <h3 class="trash-title">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="3 6 5 6 21 6"/>
                                            <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                                        </svg>
                                        Trash
                                    </h3>
                                    <span class="trash-count" id="trashCount">0 items</span>
                                </div>
                                <div class="trash-actions">
                                    <span class="trash-info">Auto-deletes after 7 days</span>
                                    <button class="btn-secondary btn-sm" id="emptyTrashBtn" data-tooltip="Permanently delete all trashed items" disabled>
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="3 6 5 6 21 6"/>
                                            <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                                            <line x1="10" y1="11" x2="10" y2="17"/>
                                            <line x1="14" y1="11" x2="14" y2="17"/>
                                        </svg>
                                        Empty Trash
                                    </button>
                                </div>
                            </div>
                            <div class="trash-content" id="trashContent">
                                <div class="trash-empty">
                                    <svg class="trash-empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <polyline points="3 6 5 6 21 6"/>
                                        <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                                    </svg>
                                    <p>Trash is empty</p>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="activity-section">
                            <div class="activity-header">
                                <h3 class="activity-title">Recent Activity</h3>
                            </div>
                            <table class="activity-table" id="activityTable">
                                <thead>
                                    <tr>
                                        <th>Preview</th>
                                        <th>Title</th>
                                        <th>Studio</th>
                                        <th>Model</th>
                                        <th>Seed</th>
                                        <th>Time</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="activityBody">
                                    <tr>
                                        <td colspan="7" class="activity-empty">No recent activity</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Danger Zone Section -->
                <section id="danger" class="settings-section settings-section-danger">
                    <div class="settings-section-header">
                        <h2>Danger Zone</h2>
                        <p>Irreversible actions - proceed with caution</p>
                    </div>
                    <div class="settings-section-body">
                        <div class="danger-action">
                            <div class="danger-action-info">
                                <h4>Clear All History</h4>
                                <p>Remove all generation history from all studios</p>
                            </div>
                            <button class="btn-danger-outline" id="clearHistoryBtn">Clear History</button>
                        </div>
                        <div class="danger-action">
                            <div class="danger-action-info">
                                <h4>Clear All Favorites</h4>
                                <p>Remove all saved favorites from all studios</p>
                            </div>
                            <button class="btn-danger-outline" id="clearFavoritesBtn">Clear Favorites</button>
                        </div>
                        <div class="danger-action" id="deleteAccountRow">
                            <div class="danger-action-info">
                                <h4>Delete Account</h4>
                                <p>Permanently delete your account and all cloud data</p>
                            </div>
                            <button class="btn-danger" id="deleteAccountBtn">Delete Account</button>
                        </div>
                    </div>
                </section>

                <!-- Not Logged In Message -->
                <section id="notLoggedIn" class="settings-section settings-not-logged-in" style="display: none;">
                    <div class="settings-login-prompt">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                        <h2>Sign in to access settings</h2>
                        <p>Create a free account to save your preferences and sync across devices</p>
                        <div class="settings-login-buttons">
                            <button class="btn-primary" id="signInBtn">Sign In</button>
                            <button class="btn-secondary" id="createAccountBtn">Create Account</button>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <button class="lightbox-close" aria-label="Close lightbox" id="lightboxClose">&times;</button>
        <img class="lightbox-image" id="lightboxImage" src="" alt="Preview">
    </div>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <span>HEFAISTOS</span>
            <span class="footer-divider">&bull;</span>
            <span>Powered by OpenRouter AI</span>
            <span class="footer-divider">â€¢</span>
            <a href="privacy.html" class="footer-legal">Privacy</a>
            <a href="terms.html" class="footer-legal">Terms</a>
        </div>
    </footer>

    <script src="i18n.js"></script>
    <script src="shared.js"></script>
    <script src="settings.js"></script>
</body>
</html>
